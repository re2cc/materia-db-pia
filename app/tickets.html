<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <style>
        #response-container {
            display: none;
            padding: 3rem;
            margin: 3rem 5rem;
            font-size: 120%;
            border: 5px dashed #ccc;
        }

        label {
            margin-left: 0.3rem;
            margin-right: 0.3rem;
        }

        button {
            font-size: 100%;
            padding: 0.5rem;
            margin: 0.3rem;
            text-transform: uppercase;
        }

    </style>
</head>
<body>

<h1>Boletos</h1>
<p id='pywebview-status'><i>pywebview</i> is not ready</p>
<p id='nameText'></p>

<h2>Ver detalles:</h2>
<label for="boletosDrop">Selecciona un boleto:</label>
<select name="boletosDrop" id="boletosDrop">
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
</select>
<button onClick="get_ticket()">Cambiar</button><br/>
<button onClick="go_dashboard()">Regresar</button><br/>

<div id="response-container"></div>
<script>
    window.addEventListener('pywebviewready', function() {
        var container = document.getElementById('pywebview-status')
        container.innerHTML = '<i>pywebview</i> is ready'
        pywebview.api.initialize_tickets().then(initialize)
    })

    function initialize(response){
        var container = document.getElementById('nameText')
        container.innerText = 'Bienvenido ' + response.name + '!'

        var option = document.getElementById('boletosDrop')
        option.innerHTML = response.ticket_options
    }

    function showResponse(response) {
        var container = document.getElementById('response-container')

        container.innerText = response.message
        container.style.display = 'block'
    }

    function go_dashboard() {
        pywebview.api.go_dashboard()
    }

    function get_ticket() {
        var options = document.getElementById("boletosDrop");
        var selected = options.value;
        pywebview.api.get_ticket_detailds(selected).then(showResponse)
    }

</script>
</body>
</html>